#!/usr/bin/env python3
# -*- coding: utf-8 -*-
u"Calls on waf directly: this is a link which both windows and git can understand"
import  sys
import  subprocess
from    pathlib     import Path

fname = Path.cwd()/"wafbuilder"/"bin"/"waf"
if not fname.exists():
    msg  = "Missing wafbuilder: do\n"
    msg += "    git clone http://gitlab.picoseq.org/build-system/wafbuilder.git\n"
    raise IOError(msg)

args = tuple(sys.argv)
if args[0].startswith('python'):
    args = args[2:]
else:
    args = args[1:]

if sys.platform.startswith('win'):
    subprocess.run([str(Path("wafbuilder")/"bin"/"waf.bat")] + list(args))
else:
    subprocess.run([str(Path("wafbuilder")/"bin"/"waf")] + list(args))
